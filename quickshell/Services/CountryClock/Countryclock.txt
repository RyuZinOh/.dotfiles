import QtQuick
import Quickshell

Item {
    id: root
    width: timeText.width
    height: timeText.height

    property alias font: timeText.font
    property alias color: timeText.color
    property int fontSize: 14

    SystemClock {
        id: clock
        precision: SystemClock.Minutes
    }

    function pad(n) {
        return n < 10 ? "0" + n : "" + n;
    }

    function formatTime(date) {
        let utc = date.getTime() + (date.getTimezoneOffset() * 60000);
        let japanTime = new Date(utc + (9 * 3600000));
        let hours = japanTime.getHours();
        let minutes = japanTime.getMinutes();
        let ampm = hours >= 12 ? "PM" : "AM";
        hours = hours % 12;
        if (hours === 0){
            hours = 12;
        }
        return pad(hours) + ":" + pad(minutes) + " " + ampm;
    }

    Repeater {
        model: 6
        Text {
            anchors.centerIn: parent
            text: root.formatTime(clock.date)
            font.pixelSize: fontSize
            font.bold: true
            font.family: "CaskaydiaCove NF"
            color: "white"
            opacity: 0.15
        }
    }

    // invisible text for alias
    Text {
        id: timeText
        visible: false
    }
}
